<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter Movies by Category</title>
</head>
<body>
    <h1>Filter Movies by Category</h1>
    <form action="/filter_movies" method="POST">
        <label for="category_id">Select Category:</label>
        <select name="category_id" id="category_id">
            {% for category in categories %}
            <option value="{{ category[0] }}">{{ category[1] }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filter</button>
        <button type="button" onclick="window.location.href='/filter_movies'">Reset</button>
    </form>

    {% if movies %}
    <h2>Movies in Selected Category</h2>
    <table>
        <thead>
            <tr>
                <th>Category Name</th>
                <th>Movie Title</th>
                <th>Description</th>
                <th>Release Date</th>
                <th>Duration</th>
                <th>Rating</th>
                <th>Director</th>
            </tr>
        </thead>
        <tbody>
            {% for movie in movies %}
            <tr>
                <td>{{ movie[0] }}</td>
                <td>{{ movie[1] }}</td>
                <td>{{ movie[2] }}</td>
                <td>{{ movie[3].strftime('%Y-%m-%d') }}</td>
                <td>{{ movie[4] }}</td>
                <td>{{ movie[5] }}</td>
                <td>{{ movie[6] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</body>
</html>
